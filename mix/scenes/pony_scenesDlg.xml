<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE scenes [
	<!ELEMENT scenes (scene+)>
	<!ELEMENT scene (filter*,(p|script)*,action*)>
	<!ELEMENT filter EMPTY>
	<!ELEMENT script (#PCDATA)>
	<!ELEMENT action EMPTY>
	<!ATTLIST scene
		id ID #REQUIRED
		name CDATA #REQUIRED
		list CDATA #IMPLIED
		priority CDATA #IMPLIED
	>
	<!ATTLIST filter
		target (top|bottom) #REQUIRED
		type CDATA #REQUIRED
		name CDATA #IMPLIED
		value CDATA #IMPLIED
	>
	<!ATTLIST script type CDATA #FIXED "text/javascript">
	<!ATTLIST action
		name CDATA #REQUIRED
		listas CDATA #IMPLIED
	>

	<!-- P can now have not only #PCDATA, but also IF and ELSE, in any combination. -->
	<!ELEMENT p (#PCDATA|if|else)*>
	<!ELEMENT if (#PCDATA|if|else)*>
	<!ELEMENT else (#PCDATA|if|else)*>
	<!-- Same as FILTER above. -->
	<!ATTLIST if
		target (top|bottom) #REQUIRED
		type CDATA #REQUIRED
		name CDATA #IMPLIED
		value CDATA #IMPLIED
	>
]>
<scenes>
	<scene id="PonyConvoStartUnknown" name="(starting node)">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<filter target="bottom" type="relation" value="none" />
		<p>
			The [b:t:skin/color] [b:title] waves a [b:foot] at you.
		</p>
		<p>
			"Hi there! Can I help you?"
		</p>
		<script type="text/javascript">
			<![CDATA[
				bottom.SetRelation(top, "acquaintance", true);
				bottom.ChangeLiking(top, 10); //for testing? or do ponies just like meeting people?
			]]>
		</script>
		<action name="Talk" />
		<action name="Flirt" />
		<action name="Never mind" />
	</scene>

	<scene id="PonyConvoStartKnown" name="(starting node)">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			The [b:t:skin/color] [b:title] smiles, waving a [b:foot] at you.
		</p>
		<p>
			"Hello again! Need something?"
		</p>
		<action name="Talk" />
		<action name="Flirt" />
		<action name="Never mind" />
	</scene>

	<scene id="PonyConvoTalk" name="Talk" list="Talk">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			"Sure. What would you like to talk about?"
		</p>
		<action name="Talk about him" />
		<action name="Talk about his origins" />
		<action name="Never mind" />
	</scene>

	<scene id="PonyConvoTalkHimselfLiked" name="Talk about him" list="[b:Him]self">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<filter target="bottom" type="liking" value="20" />
		<p>
			The pony smiles up at you, before turning [b:his] face away.
		</p>
		<p>
			"I'm flattered you'd want to talk about me, but there isn't much to say."
		</p>
		<script type="text/javascript">
			<![CDATA[
				bottom.ChangeLiking(top, 5);
			]]>
		</script>
		<action name="Talk about his origins" />
		<action name="Never mind" />
	</scene>

	<scene id="PonyConvoTalkHimself" name="Talk about him" list="[b:Him]self">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<filter target="bottom" type="liking" value="20" />
		<p>
			The pony scratches [b:his] a hoof against the ground and smiles.
		</p>
		<p>
			"Well, I'm not all that much, really."
		</p>
		<script type="text/javascript">
			<![CDATA[
				bottom.ChangeLiking(top, 5);
			]]>
		</script>
		<action name="Talk about his origins" />
		<action name="Never mind" />
	</scene>

	<scene id="PonyConvoTalkOrigins" name="Talk about his origins" list="[b:His] origins">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			<if target="bottom" type="liking" value="20">
				"I was born and raised around here. My kind came from the land of Equestria."
			</if>
			<else>
				"Oh. I was born and raised here. In the past, my kind came from a far away land."
			</else>
		</p>
		<action name="Press about his origins" />
		<action name="Talk about him" />
		<action name="Get going" />
	</scene>

	<scene id="PonyConvoPressOriginsLiked" name="Press about his origins" list="Press about [b:his] origins">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<filter target="bottom" type="liking" value="20" />
		<p>
			"Really? I guess it wouldn't hurt."
		</p>
		<p>
			[b:He] trots closer to you, then sits down with [b:his] front hooves on the ground between [b:his] back hooves.
		</p>
		<p>
			"They say that my kind traveled to this world because of an accident with portals. When they arrived, it was difficult. They weren't used to the dangers and difficulties of living here. Over time, apparently, our kind has become much more resilient to this world. They've acclimated and adjusted to this world's way of life."
		</p>
		<action name="Ask if he likes it here" />
		<action name="Get going" />
	</scene>

	<scene id="PonyConvoPressOrigins" name="Press about his origins" list="Press about [b:his] origins">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			"It's a boring story. You wouldn't be interested."
		</p>
		<action name="Talk about his origins" />
		<action name="Get going" />
	</scene>

	<scene id="PonyConvoDoYouLikeIt" name="Ask if he likes it here" list="Do you like it here?">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			"Like I said, I was born here. I'm used to this place. Still, it's hard not to think about where we come from."
		</p>
		<p>
			[b:He] rises from the ground, [b:his] tail flicking in the air.
		</p>
		<p>
			"Anything else you would like to talk about?"
		</p>
		<action name="Talk about him" />
		<action name="Get going" />
	</scene>

	<scene id="PonyConvoFlirt" name="Flirt" list="You know...">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			"Yes?"
		</p>
		<action name="Flirt about hair" listas="...your mane is beautiful." />
		<action name="Flirt about body" listas="...you're in amazing shape." />
		<action name="Never mind" listas="...never mind." />
	</scene>

	<scene id="PonyConvoFlirtHair" name="Flirt about hair" list="Flirt about hair">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			[b:He] blushes, turning [b:his] face away.
		</p>
		<p>
			"Thank you."
		</p>
		<script type="text/javascript">
			<![CDATA[
				bottom.ChangeLiking(top, 5);
			]]>
		</script>
		<action name="Talk" />
		<action name="Flirt" />
		<action name="Get going" />
	</scene>

	<scene id="PonyConvoFlirtBodyLiked" name="Flirt about body" list="Flirt about body">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<filter target="bottom" type="liking" value="30" />
		<p>
			The [b:title] smiles, turning [b:his] face away slightly. [b:His] eyes remain fixed on you.
		</p>
		<p>
			"Th-thank you..."
		</p>
		<script type="text/javascript">
			<![CDATA[
				bottom.ChangeLiking(top, 10);
			]]>
		</script>
		<action name="Talk" />
		<action name="Flirt" />
		<action name="Get going" />
	</scene>

	<scene id="PonyConvoFlirtBody" name="Flirt about body" list="Flirt about body">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<filter target="bottom" type="liking" value="30-" />
		<p>
			"You should keep your eyes to yourself"
		</p>
		<script type="text/javascript">
			<![CDATA[
				bottom.ChangeLiking(top, -10);
			]]>
		</script>
		<action name="Sorry for flirting" />
		<action name="Talk" />
		<action name="Flirt" />
		<action name="Get going" />
	</scene>

	<scene id="PonyConvoFlirtApologize" name="Sorry for flirting" list="Sorry!">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			"Well, you didn't mean anything bad by it, so I suppose I can forgive you."
		</p>
		<script type="text/javascript">
			<![CDATA[
				bottom.ChangeLiking(top, 5);
			]]>
		</script>
	</scene>

	<scene id="PonyConvoNeverMind" name="Never mind" list="Never mind, it's nothing.">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			"Alright, I guess."
		</p>
		<action name="Talk" />
		<action name="Flirt" />
		<action name="Get going" />
	</scene>

	<scene id="PonyConvoGetGoing" name="Get going" list="I should get going.">
		<filter target="bottom" type="bodylev" name="littlepony" />
		<p>
			<if target="bottom" type="liking" value="30">
				"Already? Alright. I'll talk to you later!"
			</if>
			<else>
				"Well, okay. Bye!"
			</else>
		</p>
	</scene>
</scenes>